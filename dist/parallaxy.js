!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).Parallaxy=t()}(this,(function(){"use strict";const e=[],t={speed:.3,scale:1.5};class n{constructor(t,n={}){if(this.element=t,this.config=n,!t)throw"[Parallaxy] 'element' must be specified when you create a new Parallaxy object";n=this.verfiyConfiguration(n),t.style.willChange="transform",e.push({element:t,instance:this}),this.start()}verfiyConfiguration(e){if(e.x||e.y||(e.y={speed:t.speed}),e.x&&!e.x.speed&&(e.x.speed=t.speed),e.y&&!e.y.speed&&(e.y.speed=t.speed),e.x&&e.x.speed<=0)throw"[Parallaxy] 'speed' need to be bigger than 0";if(e.y&&e.y.speed<=0)throw"[Parallaxy] 'speed' need to be bigger than 0";if(e.x&&e.x.speed>1)throw"[Parallaxy] 'speed' need to be smaller than 1";if(e.y&&e.y.speed>1)throw"[Parallaxy] 'speed' need to be smaller than 1";if(e.scale<1)throw"[Parallaxy] 'scale' need to be bigger than 1 (or equal but with overflow)";return e.scale||(e.scale=t.scale),e}updateConfig(e){const t=this.verfiyConfiguration(null!=e?e:r(this.element));this.config=t,this.stop(),this.start()}matchingBreakingPoint(){const e=this.config.breakPoint;return!(!e||!window.matchMedia(e).matches)&&(this.stop(),!0)}start(){this.matchingBreakingPoint()||this.updatePosition()}stop(){window.cancelAnimationFrame(this.frameId),this.reset()}reset(){this.element.style.transform=""}updatePosition(){if(!this.element.isConnected)return void this.stop();const e=this.element.getBoundingClientRect(),t=[];t.push(`scale(${this.config.scale})`);let n={x:0,y:0};this.config.y&&(n.y=this.translateY(e)),this.config.x&&(n.x=this.translateX(e)),t.push(`translate3d(${n.x}px, ${n.y}px, 0px)`),this.element.style.transform=t.join(" "),this.frameId=window.requestAnimationFrame(this.updatePosition.bind(this))}translateY(e){var t;const n=this.config.y.speed,i=this.config.y.inverted,o=e.top+e.height/2;let s=((null!==(t=this.config.axes)&&void 0!==t?t:window.innerHeight/2)-o)*n;i&&(s=-s);const r=(e.height-e.height/this.config.scale)/2;return!this.config.y.overflow&&Math.abs(s)>=r&&(s=s<0?-r:r),s}translateX(e){var t;const n=this.config.x.speed,i=this.config.x.inverted,o=e.top+e.height/2;let s=((null!==(t=this.config.axes)&&void 0!==t?t:window.innerHeight/2)-o)*n;i&&(s=-s);const r=(e.width-e.width/this.config.scale)/2;return!this.config.x.overflow&&Math.abs(s)>=r&&(s=s<0?-r:r),s}}function i(e){return null!=e&&(""===e||"true"===e)}function o(e){const t=parseFloat(e);return isNaN(t)||"number"!=typeof t?void 0:t}function s(t){return e.findIndex((e=>e.element===t))}function r(e){var n,s;const r=e.dataset,a=void 0!==r.prlX,l=void 0!==r.prlY,d={};a&&(d.x={speed:null!==(n=o(r.prlSpeedX))&&void 0!==n?n:t.speed,inverted:i(r.prlInvertedX),overflow:i(r.prlOverflowX)}),l&&(d.y={speed:null!==(s=o(r.prlSpeedY))&&void 0!==s?s:t.speed,inverted:i(r.prlInvertedY),overflow:i(r.prlOverflowY)}),d.scale=o(r.prlScale);const c=r.prlBreakpoint;void 0!==c&&(d.breakPoint=c);const h=r.prlAxes;return void 0!==h&&(d.axes=o(h)),d}function a(e){var t,i;for(const o of e){const e=-1!==s(o),a=void 0===(null===(t=o.dataset)||void 0===t?void 0:t.prlX)&&void 0===(null===(i=o.dataset)||void 0===i?void 0:i.prlY);e||a||new n(o,r(o))}}return document.addEventListener("DOMContentLoaded",(function(){a(Array.from(document.querySelectorAll("[data-prl-y], [data-prl-x]"))),new MutationObserver((function(t){var n,o;const r=[];for(const a of null!=t?t:[]){if("attributes"===a.type&&a.attributeName.includes("data-prl")){const t=a.target,l=s(t);(i(null===(n=t.dataset)||void 0===n?void 0:n.prlX)||i(null===(o=t.dataset)||void 0===o?void 0:o.prlY))&&-1===l?r.push(t):-1!==l&&e[l].instance.updateConfig()}for(const e of a.addedNodes)r.push(e);for(const t of a.removedNodes){const n=s(t);-1!==n&&e.splice(n,1)}}r.length>0&&a(r)})).observe(window.document.documentElement,{childList:!0,subtree:!0,attributes:!0})})),n}));
//# sourceMappingURL=parallaxy.js.map
