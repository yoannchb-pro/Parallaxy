{"version":3,"file":"parallaxy.js","sources":["../src/parallaxy.js"],"sourcesContent":["\"use strict\";\r\n\r\n//all actual parrallaxy elements\r\nconst ParallaxyElements = [];\r\n\r\n//DEFAULT CONFIG\r\nconst ParallaxyDefaultconfig = {\r\n  speed: 0.5,\r\n  scale: 1.5,\r\n  adaptative: 1,\r\n};\r\n\r\n//PARALLAXY MAIN CLASS\r\nclass Parallaxy {\r\n  constructor(config) {\r\n    config = this.verfiyConfiguration(config);\r\n\r\n    this.config = config;\r\n\r\n    this.$el = this.config.element[0]\r\n      ? this.config.element\r\n      : [this.config.element];\r\n    this.$el.forEach(function (el) {\r\n      el.style.willChange = \"transform\";\r\n    });\r\n\r\n    this.instances = [];\r\n    this.mainEvent = null;\r\n\r\n    this.start();\r\n  }\r\n\r\n  verfiyConfiguration(config) {\r\n    this.windowHeight = window.innerHeight;\r\n\r\n    if (!config.element)\r\n      throw \"[Parallaxy] 'element' must be specified when you create a new Parallaxy object\";\r\n\r\n    if (!config.x && !config.y)\r\n      config.y = { speed: ParallaxyDefaultconfig.speed };\r\n\r\n    if (config.x && !config.x.speed)\r\n      config.x.speed = ParallaxyDefaultconfig.speed;\r\n    if (config.y && !config.y.speed)\r\n      config.y.speed = ParallaxyDefaultconfig.speed;\r\n\r\n    if (config.x && config.x.speed <= 0)\r\n      throw \"[Parallaxy] 'speed' need to be bigger than 0\";\r\n    if (config.y && config.y.speed <= 0)\r\n      throw \"[Parallaxy] 'speed' need to be bigger than 0\";\r\n    if (config.x && config.x.speed > 0.65)\r\n      throw \"[Parallaxy] 'speed' need to be smaller than 0.65\";\r\n    if (config.y && config.y.speed > 0.65)\r\n      throw \"[Parallaxy] 'speed' need to be smaller than 0.65\";\r\n\r\n    if (config.scale < 1)\r\n      throw \"[Parallaxy] 'scale' need to be bigger than 1 (or equal but with overflow)\";\r\n    if (!config.scale) config.scale = ParallaxyDefaultconfig.scale;\r\n\r\n    if (!config.axes) config.axes = this.windowHeight / 2;\r\n\r\n    if (config.adaptative) {\r\n      const nb = parseInt(config.adaptative);\r\n      if (nb) {\r\n        if (nb <= 0)\r\n          throw \"[Parallaxy] parallaxy adaptative number must be > 0\";\r\n\r\n        config.adaptative = { type: \"number\", value: nb };\r\n      } else {\r\n        config.adaptative = { type: \"query\", value: config.adaptative };\r\n      }\r\n    }\r\n\r\n    return config;\r\n  }\r\n\r\n  start() {\r\n    this.mainEvent = this.updatePosition.bind(this);\r\n\r\n    const obj = this;\r\n\r\n    this.$el.forEach(function (el) {\r\n      el.addEventListener(\"load\", function () {\r\n        obj.updatePosition.bind(obj)();\r\n      });\r\n    });\r\n\r\n    if (this.config.adaptative) this.adaptativeImageHandler();\r\n\r\n    document.addEventListener(\"scroll\", this.mainEvent, { passive: true });\r\n\r\n    this.updatePosition();\r\n  }\r\n\r\n  stop() {\r\n    document.removeEventListener(\"scroll\", this.mainEvent, { passive: true });\r\n\r\n    this.instances.forEach(function (e) {\r\n      document.removeEventListener(\"resize\", e.fn, { passive: true });\r\n      e.obs.unobserve(e.parent);\r\n    });\r\n  }\r\n\r\n  removeElement(el) {\r\n    this.$el.splice(this.$el.indexOf(el), 1);\r\n    ParallaxyElements.splice(ParallaxyElements.indexOf(el), 1);\r\n\r\n    const filtered = this.instances.filter(function (e) {\r\n      e.element == el;\r\n    });\r\n\r\n    if (filtered && filtered.length > 0) {\r\n      filtered.forEach(function (e) {\r\n        document.removeEventListener(\"resize\", e.fn, { passive: true });\r\n        e.obs.unobserve(e.parent);\r\n      });\r\n    }\r\n\r\n    if (this.$el.length == 0) {\r\n      this.stop();\r\n    }\r\n  }\r\n\r\n  adddElement(el) {\r\n    this.$el.push(el);\r\n\r\n    this.stop();\r\n    this.start();\r\n  }\r\n\r\n  reset() {\r\n    this.$el.forEach(function (el) {\r\n      el.style.transform = \"\";\r\n    });\r\n  }\r\n\r\n  adaptativeImageHandler() {\r\n    const config = this.config.adaptative;\r\n    const type = config.type;\r\n    const value = config.value;\r\n\r\n    const obj = this;\r\n\r\n    function getParent(element) {\r\n      let parent = element;\r\n\r\n      //SETING UP PARENT OF ELEMENT\r\n      if (type == \"query\") {\r\n        parent = document.querySelector(value);\r\n      } else {\r\n        for (let i = 0; i < value; ++i) {\r\n          parent = parent.parentNode;\r\n        }\r\n      }\r\n\r\n      return parent;\r\n    }\r\n\r\n    function adaptation({ parent, element }) {\r\n      function setWidth() {\r\n        element.style.width = \"100%\";\r\n        element.style.height = \"auto\";\r\n      }\r\n\r\n      function setHeight() {\r\n        element.style.height = \"100%\";\r\n        element.style.width = \"auto\";\r\n      }\r\n\r\n      const imageAspectRatio = element.clientWidth / element.clientHeight,\r\n        parentAspectRatio = parent.clientWidth / parent.clientHeight;\r\n\r\n      if (imageAspectRatio > parentAspectRatio) setHeight();\r\n      else setWidth();\r\n    }\r\n\r\n    this.$el.forEach(function (element) {\r\n      const parent = getParent(element);\r\n      const fn = adaptation.bind(this, { parent: parent, element: element });\r\n\r\n      const ResizeObserverObj =\r\n        window.ResizeObserver ||\r\n        function (callback) {\r\n          let backSize = {\r\n            width: 0,\r\n            height: 0,\r\n          };\r\n\r\n          function loop(p, c) {\r\n            if (\r\n              p.clientWidth != backSize.width ||\r\n              p.clientHeight != backSize.height\r\n            ) {\r\n              c();\r\n            }\r\n\r\n            backSize.width = p.clientWidth;\r\n            backSize.height = p.clientHeight;\r\n          }\r\n\r\n          let inter = null;\r\n\r\n          return {\r\n            observe: function (lookAt) {\r\n              inter = setInterval(loop.bind(null, lookAt, callback), 1000 / 30); //30 fps\r\n            },\r\n            unobserve: function () {\r\n              clearInterval(inter);\r\n            },\r\n          };\r\n        };\r\n\r\n      const obsResize = new ResizeObserverObj(fn);\r\n      obsResize.observe(parent);\r\n      document.addEventListener(\"resize\", fn, { passive: true });\r\n\r\n      obj.instances.push({\r\n        element: element,\r\n        parent: parent,\r\n        fn: fn,\r\n        obs: obsResize,\r\n      });\r\n\r\n      //INITIALISING SIZE\r\n      fn();\r\n    });\r\n  }\r\n\r\n  verifyParallaxy(el) {\r\n    const gC = el.dataset;\r\n    if (gC.prlX == null && gC.prlY == null) {\r\n      this.removeElement(el);\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  isIntersectingObserver(element, rec, translation = { x: 0, y: 0 }) {\r\n    const height = this.windowHeight;\r\n    const additionalHeight = height / 2;\r\n\r\n    //Because rec is only in read mode\r\n    const pos = {\r\n      top: rec.top,\r\n      bottom: rec.bottom,\r\n    };\r\n\r\n    pos.top = pos.top + translation.y;\r\n    pos.bottom = pos.bottom + translation.y;\r\n\r\n    let vIntersect = false;\r\n\r\n    let topCondition =\r\n      pos.top >= -additionalHeight && pos.top <= height + additionalHeight;\r\n    let bottomCondition =\r\n      pos.bottom >= -additionalHeight &&\r\n      pos.bottom <= height + additionalHeight;\r\n\r\n    if (topCondition || bottomCondition || (pos.top < 0 && pos.bottom > height))\r\n      vIntersect = true;\r\n\r\n    if (vIntersect) return true;\r\n\r\n    return false;\r\n  }\r\n\r\n  matchingBreakingPoint() {\r\n    const breakingPoint = this.config.breakPoint;\r\n\r\n    if (!breakingPoint) return false;\r\n\r\n    if (window.matchMedia(breakingPoint).matches) {\r\n      this.reset();\r\n      return true;\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  updatePosition() {\r\n    const breaking = this.matchingBreakingPoint();\r\n\r\n    const obj = this;\r\n\r\n    if (!breaking)\r\n      for (const el of this.$el) {\r\n        if (!el.isConnected) {\r\n          obj.removeElement(el);\r\n          continue;\r\n        }\r\n\r\n        const rec = el.getBoundingClientRect();\r\n\r\n        const valid = obj.verifyParallaxy.bind(obj, el)();\r\n        const intersecting = obj.isIntersectingObserver(el, rec);\r\n\r\n        if (valid && intersecting) {\r\n          const transform = [];\r\n\r\n          transform.push(obj.scale());\r\n\r\n          let translation = { x: 0, y: 0 };\r\n\r\n          if (obj.config.y) {\r\n            const transY = obj.translateY(rec);\r\n            translation.y = transY;\r\n            transform.push(`translateY(${transY}px)`);\r\n          }\r\n\r\n          if (obj.config.x) {\r\n            const transX = obj.translateX(rec);\r\n            translation.x = transX;\r\n            transform.push(`translateX(${transX}px)`);\r\n          }\r\n\r\n          el.style.transform = transform.join(\" \");\r\n        }\r\n      }\r\n  }\r\n\r\n  originalRect(rec) {\r\n    const scale = this.config.scale;\r\n\r\n    const top = rec.top;\r\n    const left = rec.left;\r\n    const right = rec.right;\r\n    const bottom = rec.bottom;\r\n\r\n    const width = rec.width / scale;\r\n    const height = rec.height / scale;\r\n\r\n    const additionalHeight = rec.height - height;\r\n    const additionalWidth = rec.width - width;\r\n\r\n    return {\r\n      width,\r\n      height,\r\n      top,\r\n      left,\r\n      right,\r\n      bottom,\r\n      additionalHeight,\r\n      additionalWidth,\r\n    };\r\n  }\r\n\r\n  scale() {\r\n    return `scale(${this.config.scale})`;\r\n  }\r\n\r\n  translateY(rec) {\r\n    const speed = this.config.y.speed;\r\n    const isInverted = this.config.y.inverted;\r\n\r\n    const scaledRect = rec;\r\n    const originalRect = this.originalRect(rec);\r\n\r\n    const scaleSize = originalRect.additionalHeight / 2;\r\n    const elementCenterPosition = scaledRect.top + scaledRect.height / 2;\r\n    const screenMiddleSize = this.config.axes;\r\n    const elementPositionFromTop = screenMiddleSize - elementCenterPosition;\r\n\r\n    let translation = elementPositionFromTop * speed;\r\n    if (isInverted) translation = -translation; //*(speed/4)\r\n\r\n    const newPosition = scaleSize / this.config.scale;\r\n    if (!this.config.y.overflow && Math.abs(translation) >= newPosition) {\r\n      translation = translation < 0 ? -newPosition : newPosition;\r\n    }\r\n\r\n    return translation;\r\n  }\r\n\r\n  translateX(rec) {\r\n    const speed = this.config.x.speed;\r\n    const isInverted = this.config.x.inverted;\r\n\r\n    const scaledRect = rec;\r\n    const originalRect = this.originalRect(rec);\r\n\r\n    const scaleSize = originalRect.additionalWidth / 2;\r\n    const elementCenterPosition = scaledRect.top + scaledRect.height / 2;\r\n    const screenMiddleSize = this.config.axes;\r\n    const elementPositionFromTop = screenMiddleSize - elementCenterPosition;\r\n\r\n    let translation = elementPositionFromTop * speed;\r\n    if (isInverted) translation = -translation; //*(speed/4)\r\n\r\n    const newPosition = scaleSize / this.config.scale;\r\n    if (!this.config.x.overflow && Math.abs(translation) >= newPosition) {\r\n      translation = translation < 0 ? -newPosition : newPosition;\r\n    }\r\n\r\n    return translation;\r\n  }\r\n}\r\n\r\n//HANDLER ATTRIBUTE\r\nfunction ParallaxyAttributesHandler() {\r\n  let elementsParallaxy = document.querySelectorAll(\r\n    \"[data-prl-y], [data-prl-x]\"\r\n  );\r\n\r\n  elementsParallaxy.forEach(function (el) {\r\n    if (ParallaxyElements.indexOf(el) != -1 || !el.getAttribute) {\r\n      return;\r\n    }\r\n\r\n    ParallaxyElements.push(el);\r\n\r\n    const gC = el.dataset; //global config\r\n\r\n    const x = gC.prlX != null;\r\n    const y = gC.prlY != null;\r\n\r\n    if (x || y) {\r\n      const config = {\r\n        element: el,\r\n      };\r\n\r\n      if (x) {\r\n        const confX = {};\r\n\r\n        //speed x\r\n        const speed = gC.prlSpeedX;\r\n        confX.speed = parseFloat(speed) || ParallaxyDefaultconfig.speed;\r\n\r\n        //invert x\r\n        const invert = gC.prlInvertedX != null;\r\n        confX.inverted = invert;\r\n\r\n        //overflow x\r\n        const overflow = gC.prlOverflowX != null;\r\n        confX.overflow = overflow;\r\n\r\n        config.x = confX;\r\n      }\r\n\r\n      if (y) {\r\n        const confY = {};\r\n\r\n        //speed y\r\n        const speed = gC.prlSpeedY;\r\n        confY.speed = parseFloat(speed) || ParallaxyDefaultconfig.speed;\r\n\r\n        //invert y\r\n        const invert = gC.prlInvertedY != null;\r\n        confY.inverted = invert;\r\n\r\n        //overflow y\r\n        const overflow = gC.prlOverflowY != null;\r\n        confY.overflow = overflow;\r\n\r\n        config.y = confY;\r\n      }\r\n\r\n      //scale\r\n      const scale = gC.prlScale;\r\n      if (scale != null) config.scale = parseFloat(scale);\r\n\r\n      //break point\r\n      const breakPoint = gC.prlBreakpoint;\r\n      if (breakPoint != null) config.breakPoint = breakPoint;\r\n\r\n      //axes\r\n      const axes = gC.prlAxes;\r\n      if (axes != null) config.axes = parseFloat(axes);\r\n\r\n      //adaptative\r\n      const adaptative = gC.prlAdaptative;\r\n      if (adaptative != null)\r\n        config.adaptative =\r\n          adaptative.trim() == \"\"\r\n            ? ParallaxyDefaultconfig.adaptative\r\n            : adaptative;\r\n\r\n      new Parallaxy(config);\r\n    }\r\n  });\r\n}\r\n\r\n//OBSERVER\r\nfunction ParallaxyObserver() {\r\n  function getMutationObserver() {\r\n    return (\r\n      window.MutationObserver ||\r\n      window.WebKitMutationObserver ||\r\n      window.MozMutationObserver\r\n    );\r\n  }\r\n\r\n  const MutationObserver = getMutationObserver();\r\n\r\n  const observerDOM = new MutationObserver(function (mutations) {\r\n    if (!mutations) return;\r\n\r\n    ParallaxyAttributesHandler();\r\n  });\r\n\r\n  observerDOM.observe(window.document.documentElement, {\r\n    childList: true,\r\n    subtree: true,\r\n    attributes: true,\r\n    removedNodes: true,\r\n  });\r\n}\r\n\r\n//DOM LOADED\r\ndocument.addEventListener(\"DOMContentLoaded\", function () {\r\n  ParallaxyObserver();\r\n\r\n  ParallaxyAttributesHandler(\r\n    document.querySelectorAll(\"[data-prl-y], [data-prl-x]\")\r\n  );\r\n});\r\n\r\n//EXPORT\r\nexport default Parallaxy;\r\n"],"names":["ParallaxyElements","ParallaxyDefaultconfig","speed","scale","adaptative","Parallaxy","constructor","config","verfiyConfiguration","$el","element","forEach","el","style","willChange","instances","mainEvent","start","windowHeight","window","innerHeight","x","y","axes","nb","parseInt","type","value","updatePosition","bind","obj","addEventListener","adaptativeImageHandler","document","passive","stop","removeEventListener","e","fn","obs","unobserve","parent","removeElement","splice","indexOf","filtered","filter","length","adddElement","push","reset","transform","getParent","querySelector","i","parentNode","adaptation","setWidth","width","height","setHeight","imageAspectRatio","clientWidth","clientHeight","parentAspectRatio","ResizeObserverObj","ResizeObserver","callback","backSize","loop","p","c","inter","observe","lookAt","setInterval","clearInterval","obsResize","verifyParallaxy","gC","dataset","prlX","prlY","isIntersectingObserver","rec","translation","additionalHeight","pos","top","bottom","vIntersect","topCondition","bottomCondition","matchingBreakingPoint","breakingPoint","breakPoint","matchMedia","matches","breaking","isConnected","getBoundingClientRect","valid","intersecting","transY","translateY","transX","translateX","join","originalRect","left","right","additionalWidth","isInverted","inverted","scaledRect","scaleSize","elementCenterPosition","screenMiddleSize","elementPositionFromTop","newPosition","overflow","Math","abs","ParallaxyAttributesHandler","elementsParallaxy","querySelectorAll","getAttribute","confX","prlSpeedX","parseFloat","invert","prlInvertedX","prlOverflowX","confY","prlSpeedY","prlInvertedY","prlOverflowY","prlScale","prlBreakpoint","prlAxes","prlAdaptative","trim","ParallaxyObserver","getMutationObserver","MutationObserver","WebKitMutationObserver","MozMutationObserver","observerDOM","mutations","documentElement","childList","subtree","attributes","removedNodes"],"mappings":"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"}