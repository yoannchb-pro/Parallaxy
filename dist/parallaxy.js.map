{"version":3,"file":"parallaxy.js","sources":["../src/core/parallaxy.ts","../src/utils.ts","../src/core/attr-handler.ts","../src/core/observer.ts","../src/index.ts"],"sourcesContent":["import EventListener from \"types/eventListener\";\r\nimport Config from \"../types/config\";\r\nimport Rect from \"types/rect\";\r\n// import { isIntersecting, observe, unobserve } from \"./intersect\";\r\n\r\nconst ParallaxyElements: { element: HTMLElement; instance: Parallaxy }[] = [];\r\n\r\nconst ParallaxyDefaultconfig = {\r\n  speed: 0.2,\r\n  scale: 1.5,\r\n} as const;\r\n\r\nclass Parallaxy {\r\n  private mainEvent: EventListener<Event>;\r\n  private frameId: number;\r\n\r\n  constructor(private element: HTMLElement, private config: Config) {\r\n    if (!element)\r\n      throw \"[Parallaxy] 'element' must be specified when you create a new Parallaxy object\";\r\n\r\n    config = this.verfiyConfiguration(config);\r\n\r\n    element.style.willChange = \"transform\";\r\n\r\n    ParallaxyElements.push({ element, instance: this });\r\n\r\n    this.start();\r\n  }\r\n\r\n  private verfiyConfiguration(config: Config) {\r\n    if (!config.x && !config.y)\r\n      config.y = { speed: ParallaxyDefaultconfig.speed };\r\n\r\n    if (config.x && !config.x.speed)\r\n      config.x.speed = ParallaxyDefaultconfig.speed;\r\n    if (config.y && !config.y.speed)\r\n      config.y.speed = ParallaxyDefaultconfig.speed;\r\n\r\n    if (config.x && config.x.speed <= 0)\r\n      throw \"[Parallaxy] 'speed' need to be bigger than 0\";\r\n    if (config.y && config.y.speed <= 0)\r\n      throw \"[Parallaxy] 'speed' need to be bigger than 0\";\r\n    if (config.x && config.x.speed > 0.65)\r\n      throw \"[Parallaxy] 'speed' need to be smaller than 0.65\";\r\n    if (config.y && config.y.speed > 0.65)\r\n      throw \"[Parallaxy] 'speed' need to be smaller than 0.65\";\r\n\r\n    if (config.scale < 1)\r\n      throw \"[Parallaxy] 'scale' need to be bigger than 1 (or equal but with overflow)\";\r\n    if (!config.scale) config.scale = ParallaxyDefaultconfig.scale;\r\n\r\n    if (!config.axes) config.axes = window.innerHeight / 2;\r\n\r\n    return config;\r\n  }\r\n\r\n  //TODO\r\n  updateConfig() {}\r\n\r\n  private matchingBreakingPoint() {\r\n    const breakingPoint = this.config.breakPoint;\r\n\r\n    if (breakingPoint && window.matchMedia(breakingPoint).matches) {\r\n      this.stop();\r\n      return true;\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  start() {\r\n    if (this.matchingBreakingPoint()) return;\r\n\r\n    // if (this.config.y) observe(this.element);\r\n    // this.mainEvent = () => {\r\n    //   if (this.frameId) window.cancelAnimationFrame(this.frameId);\r\n    //   this.frameId = window.requestAnimationFrame(\r\n    //     this.updatePosition.bind(this)\r\n    //   );\r\n    // };\r\n    //if it's an image, video ...\r\n    // this.element.addEventListener(\"load\", this.updatePosition.bind(this), {\r\n    //   once: true,\r\n    // });\r\n    // document.addEventListener(\"scroll\", this.mainEvent);\r\n\r\n    this.updatePosition();\r\n  }\r\n\r\n  stop() {\r\n    // if (this.config.y) unobserve(this.element);\r\n    document.removeEventListener(\"scroll\", this.mainEvent);\r\n    this.reset();\r\n  }\r\n\r\n  reset() {\r\n    this.element.style.transform = \"\";\r\n  }\r\n\r\n  private updatePosition() {\r\n    if (!this.element.isConnected) {\r\n      this.stop();\r\n      return;\r\n    }\r\n\r\n    // if (this.config.y && !isIntersecting(this.element)) return;\r\n\r\n    const scaledRect = this.element.getBoundingClientRect();\r\n\r\n    const transform = [];\r\n\r\n    transform.push(this.scale());\r\n\r\n    let translation = { x: 0, y: 0 };\r\n\r\n    if (this.config.y) {\r\n      translation.y = this.translateY(scaledRect);\r\n    }\r\n\r\n    if (this.config.x) {\r\n      translation.x = this.translateX(scaledRect);\r\n    }\r\n\r\n    transform.push(`translate3d(${translation.x}px, ${translation.y}px, 0px)`);\r\n\r\n    this.element.style.transform = transform.join(\" \");\r\n\r\n    window.requestAnimationFrame(this.updatePosition.bind(this));\r\n  }\r\n\r\n  private scale() {\r\n    return `scale(${this.config.scale})`;\r\n  }\r\n\r\n  private translateY(scaledRect: Rect) {\r\n    const speed = this.config.y.speed;\r\n    const isInverted = this.config.y.inverted;\r\n\r\n    const elementCenterPosition = scaledRect.top + scaledRect.height / 2;\r\n    const elementPositionFromTop = this.config.axes - elementCenterPosition;\r\n\r\n    let translation = elementPositionFromTop * speed;\r\n    if (isInverted) translation = -translation;\r\n\r\n    const additionalheight =\r\n      (scaledRect.height - scaledRect.height / this.config.scale) / 2;\r\n    if (!this.config.y.overflow && Math.abs(translation) >= additionalheight) {\r\n      translation = translation < 0 ? -additionalheight : additionalheight;\r\n    }\r\n\r\n    return translation;\r\n  }\r\n\r\n  private translateX(scaledRect: Rect) {\r\n    const speed = this.config.x.speed;\r\n    const isInverted = this.config.x.inverted;\r\n\r\n    const elementCenterPosition = scaledRect.top + scaledRect.height / 2;\r\n    const elementPositionFromTop = this.config.axes - elementCenterPosition;\r\n\r\n    let translation = elementPositionFromTop * speed;\r\n    if (isInverted) translation = -translation;\r\n\r\n    const additionalWidth =\r\n      (scaledRect.width - scaledRect.width / this.config.scale) / 2;\r\n    if (!this.config.x.overflow && Math.abs(translation) >= additionalWidth) {\r\n      translation = translation < 0 ? -additionalWidth : additionalWidth;\r\n    }\r\n\r\n    return translation;\r\n  }\r\n}\r\n\r\nexport { Parallaxy, ParallaxyElements, ParallaxyDefaultconfig };\r\n","import { ParallaxyElements } from \"core/parallaxy\";\r\n\r\n/**\r\n * Parse boolean from attribute\r\n * @param str\r\n * @returns\r\n */\r\nfunction parseBooleanAttribute(str: string): boolean {\r\n  return str !== null && str !== undefined && (str === \"\" || str === \"true\");\r\n}\r\n\r\n/**\r\n * Parse float from attribute\r\n * @param str\r\n * @returns\r\n */\r\nfunction parseFloatAttributes(str: string): number {\r\n  const nb = parseFloat(str);\r\n  return isNaN(nb) || typeof nb !== \"number\" ? undefined : nb;\r\n}\r\n\r\n/**\r\n * Find a parallaxy element by the index\r\n * @param element\r\n * @returns\r\n */\r\nfunction findParallaxyElementIndex(element: HTMLElement | Node) {\r\n  return ParallaxyElements.findIndex((e) => e.element === element);\r\n}\r\n\r\nexport {\r\n  parseBooleanAttribute,\r\n  parseFloatAttributes,\r\n  findParallaxyElementIndex,\r\n};\r\n","import {\r\n  findParallaxyElementIndex,\r\n  parseBooleanAttribute,\r\n  parseFloatAttributes,\r\n} from \"utils\";\r\nimport { Parallaxy, ParallaxyDefaultconfig } from \"./parallaxy\";\r\nimport Config from \"types/config\";\r\n\r\nfunction getConfigFromAttributes(element: HTMLElement): Config {\r\n  const attr = element.dataset; //global config\r\n\r\n  const isOnX = attr.prlX !== undefined;\r\n  const isOnY = attr.prlY !== undefined;\r\n\r\n  const config: Config = {};\r\n\r\n  if (isOnX) {\r\n    config.x = {\r\n      speed:\r\n        parseFloatAttributes(attr.prlSpeedX) ?? ParallaxyDefaultconfig.speed,\r\n      inverted: parseBooleanAttribute(attr.prlInvertedX),\r\n      overflow: parseBooleanAttribute(attr.prlOverflowX),\r\n    };\r\n  }\r\n\r\n  if (isOnY) {\r\n    config.y = {\r\n      speed:\r\n        parseFloatAttributes(attr.prlSpeedY) ?? ParallaxyDefaultconfig.speed,\r\n      inverted: parseBooleanAttribute(attr.prlInvertedY),\r\n      overflow: parseBooleanAttribute(attr.prlOverflowY),\r\n    };\r\n  }\r\n\r\n  config.scale = parseFloatAttributes(attr.prlScale);\r\n\r\n  const breakPoint = attr.prlBreakpoint;\r\n  if (breakPoint !== undefined) config.breakPoint = breakPoint;\r\n\r\n  const axes = attr.prlAxes;\r\n  if (axes !== undefined) config.axes = parseFloatAttributes(axes);\r\n\r\n  return config;\r\n}\r\n\r\nfunction ParallaxyAttributesHandler(elementsParallaxy: HTMLElement[]) {\r\n  for (const element of elementsParallaxy) {\r\n    const alreadySetup = findParallaxyElementIndex(element) !== -1;\r\n    const isNotParallaxy =\r\n      element.dataset?.prlX === undefined &&\r\n      element.dataset?.prlY === undefined;\r\n\r\n    if (alreadySetup || isNotParallaxy) continue;\r\n\r\n    new Parallaxy(element, getConfigFromAttributes(element));\r\n  }\r\n}\r\n\r\nexport default ParallaxyAttributesHandler;\r\n","import { findParallaxyElementIndex, parseBooleanAttribute } from \"../utils\";\r\nimport ParallaxyAttributesHandler from \"./attr-handler\";\r\nimport { ParallaxyElements } from \"./parallaxy\";\r\n\r\n//Observer\r\nfunction ParallaxyObserver() {\r\n  const observerDOM = new MutationObserver(function (mutations) {\r\n    const addedNodes: HTMLElement[] = [];\r\n\r\n    for (const mutation of mutations ?? []) {\r\n      //attributes changed\r\n      if (\r\n        mutation.type === \"attributes\" &&\r\n        mutation.attributeName.includes(\"data-prl\")\r\n      ) {\r\n        const element = mutation.target as HTMLElement;\r\n        const cardIndex = findParallaxyElementIndex(element);\r\n\r\n        const isParallaxy =\r\n          parseBooleanAttribute(element.dataset?.prlX) ||\r\n          parseBooleanAttribute(element.dataset?.prlY);\r\n\r\n        if (isParallaxy && cardIndex === -1) {\r\n          addedNodes.push(element);\r\n        } else if (cardIndex !== -1) {\r\n          ParallaxyElements[cardIndex].instance.updateConfig();\r\n        }\r\n      }\r\n\r\n      //added nodes\r\n      for (const addedNode of mutation.addedNodes) {\r\n        addedNodes.push(addedNode as HTMLElement);\r\n      }\r\n\r\n      //removed nodes\r\n      for (const removedNode of mutation.removedNodes) {\r\n        const elementIndex = findParallaxyElementIndex(removedNode);\r\n        if (elementIndex !== -1) {\r\n          ParallaxyElements.splice(elementIndex, 1);\r\n        }\r\n      }\r\n    }\r\n\r\n    if (addedNodes.length > 0) ParallaxyAttributesHandler(addedNodes);\r\n  });\r\n\r\n  observerDOM.observe(window.document.documentElement, {\r\n    childList: true,\r\n    subtree: true,\r\n    attributes: true,\r\n  });\r\n}\r\n\r\nexport default ParallaxyObserver;\r\n","import ParallaxyAttributesHandler from \"core/attr-handler\";\r\nimport ParallaxyObserver from \"core/observer\";\r\nimport { Parallaxy } from \"core/parallaxy\";\r\n\r\ndocument.addEventListener(\"DOMContentLoaded\", function () {\r\n  ParallaxyAttributesHandler(\r\n    Array.from(document.querySelectorAll(\"[data-prl-y], [data-prl-x]\"))\r\n  );\r\n  ParallaxyObserver();\r\n});\r\n\r\nexport default Parallaxy;\r\n"],"names":[],"mappings":"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"}